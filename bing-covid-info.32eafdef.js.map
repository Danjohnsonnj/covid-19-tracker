{"version":3,"sources":["index.js"],"names":["document","addEventListener","stateSelect","getElementById","updateResults","location","value","getCovidData","formattedResults","r","deprecatedData","filteredResults","Object","keys","reduce","acc","key","includes","date","Date","lastUpdateEt","results","updated","toDateString","toLocaleTimeString","positiveCases","positiveCasesViral","positiveIncrease","recovered","death","deathIncrease","hospitalizedCurrently","hospitalizedIncrease","inIcuCurrently","formatResults","state","url","response","fetch","status","data","json","console","log","forEach","innerHTML","evt","currentTarget"],"mappings":";AAAAA,SAASC,iBAAiB,mBAAoB,UACtCC,MAAAA,EAAcF,SAASG,eAAe,eAE7BC,eAAAA,EAAcC,EAAWH,EAAYI,OAC5CC,MAsDAC,EAzCgB,SAAUC,GACxBC,MAAAA,EAAiB,CACrB,cACA,kBACA,cACA,eACA,QACA,OACA,eACA,mBACA,uBACA,gBACA,SACA,gBACA,QACA,SAEIC,EAAkBC,OAAOC,KAAKJ,GAAGK,OAAO,CAACC,EAAKC,KAC7CN,EAAeO,SAASD,KAC3BD,EAAIC,GAAOP,EAAEO,IAAQ,gBAEhBD,GACN,IAEGG,EAAO,IAAIC,KAAKR,EAAgBS,cAa/BC,MAXS,CACdC,sBAF4BJ,EAAKK,qBAAqBL,EAAKM,wBAG3DC,cAAed,EAAgBe,mBAC/BC,iBAAkBhB,EAAgBgB,iBAClCC,UAAWjB,EAAgBiB,UAC3BC,MAAOlB,EAAgBkB,MACvBC,cAAenB,EAAgBmB,cAC/BC,sBAAuBpB,EAAgBoB,sBACvCC,qBAAsBrB,EAAgBqB,qBACtCC,eAAgBtB,EAAgBsB,gBAMXC,OAtDJ,eAAgBC,EAAQ9B,GACrC+B,MAAAA,6CAAkDD,iBAClDE,QAAiBC,MAAMF,GACzBC,GAAoB,MAApBA,EAASE,OAONC,aADYH,EAASI,OAL1BC,QAAQC,IAAI,gDACVN,EAASE,QAgDahC,CAAaF,IAEzCqC,QAAQC,IAAInC,GAEZI,OAAOC,KAAKL,GAAkBoC,QAAQ5B,IACpChB,SAASG,kBAAkBa,KAAO6B,UAAYrC,EAAiBQ,KAInEd,EAAYD,iBAAiB,SAAW6C,IACtCJ,QAAQC,IAAIG,EAAIC,cAAczC,OAC9BF,EAAc0C,EAAIC,cAAczC,SAGlCF","file":"bing-covid-info.32eafdef.js","sourceRoot":"..","sourcesContent":["document.addEventListener('DOMContentLoaded', async () => {\n  const stateSelect = document.getElementById('StateSelect')\n\n  async function updateResults(location = stateSelect.value) {\n    const getCovidData = async function (state = location) {\n      const url = `https://covidtracking.com/api/v1/states/${ state }/current.json`;\n      const response = await fetch(url)\n      if (response.status !== 200) {\n        console.log('Looks like there was a problem. Status Code: ' +\n          response.status);\n        return;\n      }\n\n      const data = await response.json()\n      return data;\n    };\n\n    const formatResults = function (r) {\n      const deprecatedData = [\n        'checkTimeEt',\n        'commercialScore',\n        'dateChecked',\n        'dateModified',\n        'grade',\n        'hash',\n        'hospitalized',\n        'negativeIncrease',\n        'negativeRegularScore',\n        'negativeScore',\n        'posNeg',\n        'positiveScore',\n        'score',\n        'total',\n      ]\n      const filteredResults = Object.keys(r).reduce((acc, key) => {\n        if (!deprecatedData.includes(key)) {\n          acc[key] = r[key] || 'not reported';\n        }\n        return acc;\n      }, {});\n\n      const date = new Date(filteredResults.lastUpdateEt);\n      const updated = `Updated on ${date.toDateString()} at ${date.toLocaleTimeString()}.`;\n      const results = {\n        updated,\n        positiveCases: filteredResults.positiveCasesViral,\n        positiveIncrease: filteredResults.positiveIncrease,\n        recovered: filteredResults.recovered,\n        death: filteredResults.death,\n        deathIncrease: filteredResults.deathIncrease,\n        hospitalizedCurrently: filteredResults.hospitalizedCurrently,\n        hospitalizedIncrease: filteredResults.hospitalizedIncrease,\n        inIcuCurrently: filteredResults.inIcuCurrently,\n      };\n      return results;\n    }\n\n    const fetchResponse = await getCovidData(location);\n    const formattedResults = formatResults(fetchResponse);\n    console.log(formattedResults);\n\n    Object.keys(formattedResults).forEach(key => {\n      document.getElementById(`${key}`).innerHTML = formattedResults[key];\n    });\n  }\n\n  stateSelect.addEventListener('change', (evt) => {\n    console.log(evt.currentTarget.value)\n    updateResults(evt.currentTarget.value);\n  })\n\n  updateResults()\n})"]}